---
import { Icon } from 'astro-icon/components'
import { SITE } from 'astrowind:config'
import { trimSlash } from '~/utils/permalinks'

const base = SITE.base
const makeHref = (p) => `${base}${trimSlash(p)}`.replace(/\/+$/, '/')
const currentUrl = new URL(Astro.url).pathname

const nav = [
  { text: 'Home', path: '' },
  { text: 'Commands', path: 'commands' },
  { text: 'Leaderboards', path: 'leaderboards' },
  { text: 'Badges', path: 'badges' },
  { text: 'Items', path: 'items' },
  { text: 'Challenges', path: 'challenges' },
  { text: 'Winners', path: 'winners' }, 
]

let open = false
---

<header class="top-0 z-40 relative w-full bg-[#0a0a0c]/95 border-b border-[#c6a44f]/30 shadow-[0_0_15px_rgba(198,164,79,0.3)] backdrop-blur-md">
  <div class="max-w-7xl mx-auto px-6 flex items-center justify-between py-4">

    <!-- Logo -->
    <a href={makeHref('')} class="flex items-center space-x-3 text-[#d5b76c] font-extrabold text-2xl tracking-wide drop-shadow-[0_0_10px_rgba(198,164,79,0.6)]">
      <Icon name="tabler:brand-twitch" class="w-7 h-7 text-[#c6a44f]" />
      <span>TNX</span>
    </a>

    <!-- MENU BUTTON -->
    <button
      class="px-4 py-2 rounded-md border border-[#c6a44f]/40 text-[#ffda6a] hover:bg-[#c6a44f]/10 transition md:hidden"
      onclick="document.getElementById('dropdownMenu').classList.toggle('hidden')"
    >
      القائمة
    </button>

    <!-- Desktop hidden (you asked for full dropdown only) -->
    <nav class="hidden"></nav>
  </div>

  <!-- DROPDOWN MENU -->
  <div id="dropdownMenu" class="hidden px-6 pb-4 md:hidden space-y-3">
    {nav.map(({ text, path }) => {
      const href = makeHref(path)
      return (
        <a
          href={href}
          class="block w-full text-left px-4 py-3 rounded-lg bg-black/40 border border-[#c6a44f]/30 text-[#ffda6a] hover:bg-[#c6a44f]/10 transition"
        >
          {text}
        </a>
      )
    })}
  </div>
</header>
