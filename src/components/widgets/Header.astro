---
import { Icon } from 'astro-icon/components'
import ToggleMenu from '~/components/common/ToggleMenu.astro'
import { trimSlash } from '~/utils/permalinks'

const base = import.meta.env.BASE_URL || '/'
const makeHref = (p: string) => (p ? `${base}${trimSlash(p)}/` : base)
const currentUrl = new URL(Astro.url).pathname

const nav = [
  { text: 'Home', path: '' },
  { text: 'Commands', path: 'commands' },
  { text: 'Badges', path: 'badges' },
  { text: 'Items', path: 'items' },
  { text: 'Challenges', path: 'challenges' },
]
---

<header class="top-0 z-40 relative w-full bg-[#0a0a0c]/95 border-b border-[#c6a44f]/30 shadow-[0_0_15px_rgba(198,164,79,0.3)] backdrop-blur-md">
  <div class="max-w-7xl mx-auto px-6 flex items-center justify-between py-4">
    <a href={makeHref('')} class="flex items-center space-x-3 text-[#d5b76c] font-extrabold text-2xl tracking-wide drop-shadow-[0_0_10px_rgba(198,164,79,0.6)]">
      <Icon name="tabler:brand-twitch" class="w-7 h-7 text-[#c6a44f]" />
      <span>TNX</span>
    </a>

    <nav class="hidden md:flex space-x-8 text-lg font-semibold uppercase tracking-wider">
      {nav.map(({ text, path }) => {
        const href = makeHref(path)
        const isActive = currentUrl === href
        return (
          <a
            href={href}
            aria-current={isActive ? 'page' : undefined}
            class:list={[
              'relative transition-all duration-200 text-[#c6a44f] hover:text-[#f0d68c] drop-shadow-[0_0_6px_rgba(198,164,79,0.4)]',
              { 'text-[#f7e6ac] after:absolute after:bottom-[-4px] after:left-0 after:w-full after:h-[2px] after:bg-[#f7e6ac]': isActive },
            ]}
          >
            {text}
          </a>
        )
      })}
    </nav>

    <div class="md:hidden text-[#c6a44f]">
      <ToggleMenu />
    </div>
  </div>
</header>
