<section class="max-w-6xl mx-auto py-16 px-6 space-y-16 text-white">

  <!-- POINTS -->
  <div>
    <h2 class="text-3xl font-bold mb-8 bg-gradient-to-r from-[#ffda6a] to-[#c29200] bg-clip-text text-transparent">Points</h2>
    <div id="points-list" class="space-y-3"></div>
    <button id="loadMorePoints" class="mt-6 px-6 py-2 bg-[#c6a44f]/20 border border-[#c6a44f]/40 rounded-lg text-[#f7e6ac] hover:bg-[#c6a44f]/30 transition">Show More</button>
  </div>

  <!-- WATCHTIME -->
  <div>
    <h2 class="text-3xl font-bold mb-8 bg-gradient-to-r from-[#ffda6a] to-[#c29200] bg-clip-text text-transparent">Watchtime</h2>
    <div id="watchtime-list" class="space-y-3"></div>
    <button id="loadMoreWatchtime" class="mt-6 px-6 py-2 bg-[#c6a44f]/20 border border-[#c6a44f]/40 rounded-lg text-[#f7e6ac] hover:bg-[#c6a44f]/30 transition">Show More</button>
  </div>

</section>

<script>
  const loadSegment = (id, users, perPage) => {
    const container = document.getElementById(id + '-list')
    const button = document.getElementById('loadMore' + id.charAt(0).toUpperCase() + id.slice(1))
    let index = 0

    const render = () => {
      const slice = users.slice(index, index + perPage)
      slice.forEach((user, i) => {
        const rank = index + i + 1
        const el = document.createElement('div')
        el.className = 'flex justify-between items-center bg-black/40 p-4 rounded-xl border border-[#c6a44f]/30'
        el.innerHTML = `
          <div class="flex items-center gap-3 text-gray-200">
            <span class="text-[#f7e6ac] font-bold w-8 text-right">${rank}.</span>
            <span class="font-semibold">${user.UserName}</span>
            <span class="text-gray-400 text-sm">(${user.UserLogin})</span>
          </div>
          <span class="text-[#f7e6ac] font-bold">${user.Value}</span>
        `
        container.appendChild(el)
      })
      index += perPage
      if (index >= users.length) button.style.display = 'none'
    }

    button.addEventListener('click', render)
    render()
  }

  fetch('/tnx-site/public/api/leaderboard_data.json')
    .then(res => res.json())
    .then(data => {
      loadSegment('points', data.points, 20)
      loadSegment('watchtime', data.watchtime, 20)
    })
</script>
